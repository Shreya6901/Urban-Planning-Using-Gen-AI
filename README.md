# **City Planning Suggestions using Vision-Language Model (VLM) and OpenStreetMap API**

This project provides sustainable and budget-conscious city planning solutions by analyzing location-specific maps. It uses a Vision-Language Model (VLM) and OpenStreetMap (OSM) to generate suggestions for urban infrastructure improvements. The solution involves fetching a city map with amenities, processing the map and a problem-specific prompt through the VLM, and returning both textual suggestions and a highlighted map image showing where the suggested changes should be implemented.

## **Project Structure**

```bash
.
├── app.py # Streamlit frontend for interacting with the model
├── vlm.py # Vision-Language Model for generating suggestions
├── openstreetmap_api.py # Script to fetch map images and amenities from OSM API
├── highlight_pixels.py # Script to highlight specific areas on the image
├── pipeline.py # Integrates the workflow from input to output
├── requirements.txt # Required dependencies for the project
└── README.md # Project documentation

```

### **File Descriptions**

- **`app.py`**: Streamlit-based web application for the frontend, allowing users to input a city name, select key amenities, and describe the problem. It interacts with the VLM and displays the output text and highlighted solution map.
  
- **`vlm.py`**: Contains the Vision-Language Model (VLM), which processes the map and problem description to provide planning suggestions. It outputs both text suggestions and coordinates where the suggested changes should be made.

- **`openstreetmap_api.py`**: Interacts with the OpenStreetMap API to retrieve a map image of the given city and marks selected amenities (like hospitals, gardens, etc.). The map includes a legend showing the location of the amenities.

- **`highlight_pixels.py`**: A utility function that highlights specific areas of the city map based on coordinates provided by the VLM. It uses OpenCV to draw circles around the suggested locations for improvement.

- **`pipeline.py`**: The core integration of the project. It takes user input for the city, amenities, and a problem description, retrieves the map from OSM, processes it through the VLM, and highlights areas on the map based on the suggestions. It returns the planning suggestions as text and the modified map image.

## **Installation and Setup**

### **1. Clone the Repository**
```bash
git clone https://github.com/your-repository/city-planning-vlm-osm.git
cd city-planning-vlm-osm
```

## **Installation and Setup**

### **1. Clone the Repository**
```bash
git clone https://github.com/your-repository/city-planning-vlm.git
cd city-planning-vlm
```
### **2. Install Required Packages**
Make sure you have Python 3.x installed. Install the required packages by running:

```bash
pip install -r requirements.txt
```

### **3. Set Up OpenStreetMap API**
To fetch maps and amenities for a specific city, this project uses the OpenStreetMap API.

-The openstreetmap_api.py script is responsible for fetching the city map with marked amenities.
-Make sure to configure the API settings (if needed) in the openstreetmap_api.py file.

### **4. Running the Application**
#### Frontend (Streamlit)
To start the Streamlit app, run:
```bash
streamlit run app.py
```

This will start a web interface where you can input:
-City Name: For example, "Mumbai"
-Amenities to focus on: Such as "hospitals", "gardens"
-Problem faced by the city: For example, "lack of healthcare facilities in the northern areas"

The application will return:
-Text Suggestions: Planning solutions generated by the VLM.
-Highlighted Map: A map showing the suggested locations for improvement.

#### Direct Execution via Pipeline
Alternatively, you can run the entire process from the command line using the pipeline:

```bash
python pipeline.py
```

This will retrieve the map from OpenStreetMap, process it through the VLM, and save the suggestions and highlighted map locally.


### **5. Example Usage**

Input:

-City Name: Bangalore

-Amenities: Hospitals, Parks

-Problem: "Insufficient healthcare facilities in the eastern areas."

Output:

-Text Suggestions:
Construct new hospitals in the northeastern region.
Improve access to parks and open spaces in the city center.
Allocate budget for healthcare infrastructure in the eastern zones.

-Highlighted Map:
The locations where hospitals should be built or parks expanded will be marked with colored circles, and the map will display a legend.

### **Technical Details**

-Vision-Language Model (VLM):

The VLM processes the city map image and problem description to generate text suggestions for urban improvements. It also identifies the coordinates of important areas where new infrastructure should be added.

-OpenStreetMap API:

Fetches city-specific maps and marks selected amenities (hospitals, gardens, etc.) based on user input. The map also includes a legend for the marked amenities.

-OpenCV for Image Highlighting:

The highlight_pixels.py script uses OpenCV to draw circles around key areas on the map image where suggested improvements should be made, based on the coordinates provided by the VLM.

### **Customization**

#### Modifying the VLM:
You can fine-tune the VLM by modifying the prompt.txt file or adjusting the model parameters in vlm.py. This can allow the model to focus on different aspects of urban planning or adapt it to different regions.

#### Changing the Highlight Color or Radius:
You can customize the color and radius of the highlighted areas in highlight_pixels.py by adjusting the default parameters of the highlight_pixels function.

```python
highlighted_image = highlight_pixels(image, coordinates, highlight_color=(0, 255, 0), radius=100)
```

### **Contributing**
If you'd like to contribute to this project, feel free to fork the repository and submit pull requests. Any improvements or suggestions are welcome!

### **License**
This project is licensed under the MIT License - see the LICENSE file for details.

